<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
		"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
   <title>Andes3 problem server</title>
</head>
<body>

<a href="http://common-lisp.net/pipermail/tbnl-devel/2009-February/004622.html">This tbnl-devel post</a> suggests that Hunchentoot might not be such a
good choice for server.

<p>We define the Andes Problem server as a distinct server that handles
Andes user/problem sessions.&nbsp;  
User login, authentification, keeping track of grades, 
<em>et cetera</em> are handled by the WebAssign/LON-CAPA servers.

<p>There will also be a log database on the Andes Problem server which stores
any previous solutions in the form of a list of client-server calls
indexed by user name and problem name.&nbsp;  Previous work on the problem
can be reconstructed  simply by passing the list 
to the help system and the user interface.&nbsp;  We have
not yet specified whether the web server script or the help system lisp
will access the log database.

<p>The following is written more for WebAssign since we are more
familair with their architecture.
<ol>

<li>    Student logs in to WebAssign, which authenticates the student, 
and generates a WebAssign session id, stored as a cookie on the browser.

<li>    Student navigates to homework page that displays Andes problems.&nbsp;
This page is generated by WebAssign.&nbsp; Each Andes problem contains
the problem text, the current score, and a link.

<li> The student clicks on a link associated with an Andes problem.&nbsp;
The URL points to the Andes Problem server and contains the 
WebAssign sessions id, the problem id, and user name.&nbsp; 

<li> The Andes problem server will be reached via proxy from 
the WebAssign load balancers.&nbsp;  Thus the Andes server does not
have to authenticate any user requests.&nbsp;

<li> The Andes problem server returns the Andes3 drawing user interface
to the student, possibly with the problem statement and
graphic embedded in the canvas.&nbsp;

<li> The Andes3 drawing user interface then sends a request to
the Andes server to start up a new help session for the user and
problem.

 <li>     When the student does an action, it is sent to the Andes
server which invokes the appropriate help session.&nbsp; 
The help session generates a response which is sent by the Andes
server back to the client.&nbsp; 
See <a href="nokes-example-json.txt">
     for an example of the contents of a session</a>.

<li>  The student closes the problem by closing the window, hitting
the "submit" button, or hitting the browser back button.&nbsp;  
The client tells Problem server to end the session.

<li>  The Andes server ends that user/problem session.

<li>  The Andes server sends the
score on this problem to WebAssign along with the Student ID and problem
ID.

<li>  Student is now looking at the list of Andes problems on the
page supplied by WebAssign.&nbsp;
Go to the <a href="#start"><strong>PROBLEM START</strong></a> above.

</ol>

<p>If WebAssign knows that a student has logged out (or been logged out by
a sysadmin or instructor), then it sends an unsolicited message ot the
Andes Problem server, which stops the Andes session.

<p>If an instructor is using WebAssign to tutor students or view their
work, then the "student ID" has a bit which indicates instructor is
using it.&nbsp;  Andes copies the student historical files from that student
ID to this new ID and uses them to initialize the problem.

<hr>
</body>
</html>